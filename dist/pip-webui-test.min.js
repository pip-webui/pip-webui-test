!function(){"use strict";var e=angular.module("pipWebuiTests",["pipFakeDataModel.Users","pipDataGenerator.UserParty","pipMocked","pipMocked.Users","pipMocked.Entry","pipMocked.Party","pipMocked.Announcements","pipMocked.Feedbacks","pipMocked.Tips","pipMocked.Guides","pipMocked.ServersActivities","pipMocked.Images","pipGenerators","pipBasicGeneratorServices","pipGenerators.User","pipGenerators.PartyAccess","pipGenerators.Sessions","pipGenerators.Party","pipTestCollection"]);e.run(["pipMockedResource","MockedUsersResource","MockedCurrentUserResource","TruePathResource","MockedSigninResource","MockedSignupResource","MockedSignoutResource","MockedSignupValidateResource","MockedVerifyEmailResource","MockedRecoverPasswordResource","MockedResetPasswordResource","MockedChangePasswordResource","MockedUserSessionsResource","MockedTipsResource","MockedAnnouncementsResource","MockedFeedbacksResource","MockedGuidesResource","MockedImagesResource","MockedPartyResource","MockedServersActivitiesResource",function(e,t,r,n,o,a,c,i,s,u,p,d,l,g,f,k,h,M,v,m){e.addMocks(t),e.addMocks(r),e.addMocks(l),e.addMocks(o),e.addMocks(a),e.addMocks(c),e.addMocks(i),e.addMocks(s),e.addMocks(u),e.addMocks(p),e.addMocks(d),e.addMocks(g),e.addMocks(f),e.addMocks(k),e.addMocks(h),e.addMocks(M),e.addMocks(v),e.addMocks(m),e.addMocks(n),e.registerStandardResources()}])}(),function(){"use strict";var e=angular.module("pipGenerators",[]);e.factory("pipDataGenerator",["$log",function(e){var t=function(e,t){this.name=e,this.refs=t,this.initObject=function(e){var t=this.newObject();return e&&(t=_.assign(t,e)),t},this.newObject=function(e){var t=e?e:this.refs,r=this.generateObj(t);return r},this.newObjectList=function(e,t){var r,n,o=[];if(e>0)for(r=0;r<e;r++)n=this.newObject(t),o.push(n);return o},this.initObjectList=function(e){var t,r,n=[];if(count>0)for(t=0;t<count;t++)r=this.newObject(),n.push(_.assign(r,e));return n},this.updateObject=function(e,t){var r=this.newObject(t);return e&&(r=_.assign(r,e)),r},this.generateObj=function(e){return{}}};return t}])}(),function(){"use strict";var e=angular.module("pipGenerators.PartyAccess",[]);e.factory("pipPartyAccessDataGenerator",["pipDataGenerator","pipBasicGeneratorServices","$log",function(e,t,r){var n=new e("PartyAccess",[]);return n.isContributorChance=30,n.isManagerChance=30,n.defaultShareLevel=0,n.defaultType="partner",n.generateObj=function(){var e=chance.bool({likelihood:n.isContributorChance}),r={share_level:n.defaultShareLevel,type:n.defaultType,party_name:chance.first()+" "+chance.name(),party_id:t.getObjectId(),contributor:chance.bool({likelihood:n.isContributorChance}),manager:!!e&&chance.bool({likelihood:n.isManagerChance}),id:t.getObjectId()};return r},n}])}(),function(){"use strict";var e=angular.module("pipGenerators.Party",[]);e.factory("pipPartyDataGenerator",["pipDataGenerator","pipBasicGeneratorServices","$log",function(e,t,r){var n=new e("User",["PartyAccess","Sessions"]);return n.defaultType="person",n.defaultJoin="approve",n.generateObj=function(){var e=chance.timestamp(),r=chance.timestamp(),o={name:chance.first()+" "+chance.name(),email:chance.email(),type:n.defaultType,gender:chance.gender().toLowerCase(),loc_name:chance.address(),loc_pos:{type:"Point",coordinates:[chance.floating({min:-120,max:120}),chance.floating({min:-120,max:120})]},join:n.defaultJoin,updated:e>r?new Date(e).toJSON():new Date(r).toJSON(),created:e>r?new Date(r).toJSON():new Date(e).toJSON(),id:t.getObjectId()};return o},n}])}(),function(e,t){"use strict";var r=angular.module("pipBasicGeneratorServices",[]);r.service("pipBasicGeneratorServices",function(){function r(e,r){var n=p+l,o=e||16,a=r||n;return t.string({length:o,pool:a})}function n(){return t.email()}function o(){return s(8)}function a(t){return e.sample(t)}function c(t,r){var n=r?r:Math.floor(Math.random()*t.length);return e.sampleSize(t,n)}function i(e){return e&&(f=e),f}function s(e){var r=e&&e>0?Math.floor(Math.random()*e):null,n=p+d;return t.word({length:r,pool:n})}function u(){var e=t.first()+" "+t.name();return e}var p="abcdefghijklmnopqrstuvwxyz",d="ABCDEFGHIJKLMNOPQRSTUVWXYZ",l="0123456789",g=" .,;:-!?",f="http://alpha.pipservices.net";return{ABCD:p,ABCD_CAPITALIZE:d,DIGIT:l,SIGN:g,getObjectId:r,getOneWord:s,getPassword:o,getEmail:n,serverUrl:i,getName:u,getOne:a,getMany:c}})}(window._,window.chance),function(){"use strict";var e=angular.module("pipGenerators.Sessions",[]);e.factory("pipSessionsDataGenerator",["pipDataGenerator","pipBasicGeneratorServices","$log",function(e,t,r){var n=new e("Sessions",[]);return n.generateObj=function(){var e=new Date(chance.timestamp()),r={address:chance.ip(),client:t.getOne(["chrome","mozilla","explorer"]),platform:t.getOne(["windows 8","windows 7","linux"]),last_req:e.toJSON(),opened:e.toJSON(),id:t.getObjectId()};return r},n}])}(),function(){"use strict";var e=angular.module("pipTestCollection",[]);e.factory("TestCollection",["$log",function(e){function t(e,t){this.generator=e,this.size=t?t:0,this.collection=[]}return t.prototype={getGeneratorName:function(){return this.generator.name},getSize:function(){return this.size}},t.init=function(e){return 0===this.size?void(this.collection=[]):void(this.collection=generator.newObjectList(this.size))},t.getAll=function(){return _.cloneDeep(this.collection)},t.get=function(e){var t=null;return!e||e<0||e>this.collection.length-1?t:t=_.cloneDeep(this.collection[e])},t.findById=function(e,t){var r=null;return e?(r=_.find(this.collection,{id:e}),r||null):r},t.create=function(e){},t.update=function(e,t){},this["delete"]=function(e){},t}])}(),function(){"use strict";var e=angular.module("pipTestDataService",[]);e.factory("pipTestDataService",["pipAreasData","pipGoalsData","$rootScope","pipCollections","NewsUAService","pipEnums",function(e,t,r,n,o,a){return{}}])}(),function(){"use strict";var e=angular.module("pipTestDataSet",[]);e.factory("pipTestDataSet",["$log",function(e){}])}(),function(){"use strict";var e=angular.module("pipGenerators.User",[]);e.factory("pipUserDataGenerator",["pipDataGenerator","pipBasicGeneratorServices","$log","pipPartyAccessDataGenerator","pipSessionsDataGenerator",function(e,t,r,n,o){var a=new Array;a.PartyAccess=n.newObjectList(10,[]),a.Sessions=o.newObjectList(10,[]);var c=new e("User",a);return c.generateObj=function(e){var r,n=chance.timestamp(),a=chance.timestamp(),c=new Date,i=[],s=[],u=o.initObject({last_req:c.toJSON(),opened:c.toJSON()});return e&&angular.isArray(e)&&(i=e.PartyAccess||[],s=e.PartyAccess||[]),s.push(u),r={pwd_last_fail:null,pwd_fail_count:0,name:t.getName(),email:chance.email(),language:t.getOne(["en","ru","fr"]),paid:chance.bool({likelihood:30}),admin:!1,party_access:t.getMany(i),sessions:t.getMany(s),signin:n>a?new Date(n).toJSON():new Date(a).toJSON(),signup:n>a?new Date(a).toJSON():new Date(n).toJSON(),active:!0,lock:!1,email_ver:!1,id:t.getObjectId(),last_session_id:u.id}},c}])}(),function(){"use strict";var e=angular.module("pipMocked.Announcements",["ngMockE2E","ngResource"]);e.factory("MockedAnnouncementsResource",["$httpBackend","$log","MockedResource",function(e,t,r){var n=Object.create(r);return n.api="/api/announcements",n.register=function(){},n}])}(),function(){"use strict";var e=angular.module("pipMocked.Entry",["ngMockE2E","ngResource"]);e.factory("MockedSigninResource",["$httpBackend","$log","MockedResource",function(e,t,r){var n=Object.create(r);return n.api="/api/signin",n.register=function(){e.whenPOST(n.fakeUrl+n.api).respond(function(e,t,r,n,o){return console.log("pipMocks.Users22222",r,n,o),[200,{},{}]})},n}]),e.factory("MockedSignupResource",["$httpBackend","$log","MockedResource",function(e,t,r){var n=Object.create(r);return n.api="/api/signup",n.register=function(){e.whenPOST(n.fakeUrl+n.api).respond(function(e,t,r,n,o){return console.log("pipMocks.Users22222",r,n,o),[200,{},{}]})},n}]),e.factory("MockedSignoutResource",["$httpBackend","$log","MockedResource",function(e,t,r){var n=Object.create(r);return n.api="/api/signout",n.register=function(){e.whenPOST(n.fakeUrl+n.api).respond(function(e,t,r,n,o){return console.log("pipMocks.Users22222",r,n,o),[200,{},{}]})},n}]),e.factory("MockedSignupValidateResource",["$httpBackend","$log","MockedResource",function(e,t,r){var n=Object.create(r);return n.api="/api/signup_validate",n.register=function(){e.whenPOST(n.fakeUrl+n.api).respond(function(e,t,r,n,o){return console.log("pipMocks.Users22222",r,n,o),[200,{},{}]})},n}]),e.factory("MockedVerifyEmailResource",["$httpBackend","$log","MockedResource",function(e,t,r){var n=Object.create(r);return n.api="/api/verify_email",n.register=function(){e.whenPOST(n.fakeUrl+n.api).respond(function(e,t,r,n,o){return console.log("pipMocks.Users22222",r,n,o),[200,{},{}]})},n}]),e.factory("MockedRecoverPasswordResource",["$httpBackend","$log","MockedResource",function(e,t,r){var n=Object.create(r);return n.api="/api/recover_password",n.register=function(){e.whenPOST(n.fakeUrl+n.api).respond(function(e,t,r,n,o){return console.log("pipMocks.Users22222",r,n,o),[200,{},{}]})},n}]),e.factory("MockedResetPasswordResource",["$httpBackend","$log","MockedResource",function(e,t,r){var n=Object.create(r);return n.api="/api/reset_password",n.register=function(){e.whenPOST(n.fakeUrl+n.api).respond(function(e,t,r,n,o){return console.log("pipMocks.Users22222",r,n,o),[200,{},{}]})},n}]),e.factory("MockedChangePasswordResource",["$httpBackend","$log","MockedResource",function(e,t,r){var n=Object.create(r);return n.api="/api/change_password",n.register=function(){e.whenPOST(n.fakeUrl+n.api).respond(function(e,t,r,n,o){return console.log("pipMocks.Users22222",r,n,o),[200,{},{}]})},n}])}(),function(){"use strict";var e=angular.module("pipMocked.Feedbacks",["ngMockE2E","ngResource"]);e.factory("MockedFeedbacksResource",["$httpBackend","$log","MockedResource",function(e,t,r){var n=Object.create(r);return n.api="/api/feedbacks",n.register=function(){},n}])}(),function(){"use strict";var e=angular.module("pipMocked.Guides",["ngMockE2E","ngResource"]);e.factory("MockedGuidesResource",["$httpBackend","$log","MockedResource",function(e,t,r){var n=Object.create(r);return n.api="/api/guides",n.register=function(){},n}])}(),function(){"use strict";var e=angular.module("pipMocked.Images",["ngMockE2E","ngResource"]);e.factory("MockedImagesResource",["$httpBackend","$log","MockedResource",function(e,t,r){var n=Object.create(r);return n.api="/api/image_sets",n.register=function(){},n}])}(),function(){"use strict";var e=angular.module("pipMocked.Party",["ngMockE2E","ngResource"]);e.factory("MockedPartyResource",["$httpBackend","$log","MockedResource",function(e,t,r){var n=Object.create(r);return n.api="/api/parties/",n.register=function(){},n}])}(),function(){"use strict";var e=angular.module("pipMocked",["ngMockE2E","ngResource"]);e.factory("pipMockedResource",function(){function e(){for(var e=0;e<r.length;e++){var t=r[e];t.register()}}function t(e){console.log("addMocks",e),e&&angular.isObject(e)&&r.push(e)}var r=[];return{addMocks:t,registerStandardResources:e}}),e.factory("MockedResource",["$httpBackend","$log",function(e,t){return this.api="",this.fakeUrl="http://alpha.pipservices.net",this.regEsc=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},this.IdRegExp=/[a-zA-Z0-9]{24}/.toString().slice(1,-1),this.QueryRegExp=/[\d\w-_\.%\s]*$/.toString().slice(1,-1),this.EndStringRegExp=/$/.toString().slice(1,-1),this.register=function(){},this}]),e.factory("TruePathResource",["$httpBackend","$log","MockedResource",function(e,t,r){var n=Object.create(r);return n.register=function(){e.whenGET(/.*/).passThrough()},n}])}(),function(){"use strict";var e=angular.module("pipMocked.ServersActivities",["ngMockE2E","ngResource"]);e.factory("MockedServersActivitiesResource",["$httpBackend","$log","MockedResource",function(e,t,r){var n=Object.create(r);return n.api="/api/servers/activities",n.register=function(){},n}])}(),function(){"use strict";var e=angular.module("pipMocked.Tips",["ngMockE2E","ngResource"]);e.factory("MockedTipsResource",["$httpBackend","$log","MockedResource",function(e,t,r){var n=Object.create(r);return n.api="/api/tips",n.register=function(){},n}])}(),function(){"use strict";var e=angular.module("pipMocked.Users",["ngMockE2E","ngResource"]);e.factory("MockedCurrentUserResource",["$httpBackend","$log","MockedResource",function(e,t,r){var n=Object.create(r);return n.api="/api/users/current",n.register=function(){e.whenGET(n.fakeUrl+n.api).respond(function(e,t,r,n){return console.log("MockedCurrentUserResource whenGET current",r,n),[200,{},{}]})},n}]),e.factory("MockedUsersResource",["$httpBackend","$log","MockedResource",function(e,t,r){var n=Object.create(r);return n.api="/api/users",n.register=function(){e.whenGET(n.fakeUrl+n.api).respond(function(e,t,r,n){return console.log("MockedUsersResource whenGET collection",r,n),[200,{},{}]}),e.whenPOST(n.fakeUrl+n.api).respond(function(e,t,r,n,o){return console.log("MockedUsersResource whenPOST",r,n,o),[200,{},{}]}),e.whenGET(new RegExp(n.regEsc(n.fakeUrl+n.api+"/")+n.IdRegExp+n.EndStringRegExp)).respond(function(e,t,r,n){return console.log("MockedUsersResource whenGET user",r,n),[200,{},{}]}),e.whenPUT(new RegExp(n.regEsc(n.fakeUrl+n.api+"/")+n.IdRegExp+n.EndStringRegExp)).respond(function(e,t,r,n){return console.log("MockedUsersResource whenPUT",r,n),[200,{},{}]}),e.whenDELETE(new RegExp(n.regEsc(n.fakeUrl+n.api+"/")+n.IdRegExp+n.EndStringRegExp)).respond(function(e,t,r,n){return console.log("MockedUsersResource whenPUT",r,n),[200,{},{}]})},n}]),e.factory("MockedUserSessionsResource",["$httpBackend","$log","MockedResource",function(e,t,r){var n=Object.create(r);return n.api="/api/users/:party_id/sessions/:id",n.register=function(){e.whenGET(new RegExp(n.regEsc(n.fakeUrl+"/api/users/")+n.IdRegExp+n.regEsc("/sessions"))).respond(function(e,t,r,n){return console.log("MockedUserSessionsResource whenGET current",r,n),[200,{},{}]}),e.whenDELETE(new RegExp(n.regEsc(n.fakeUrl+"/api/users/")+n.IdRegExp+n.regEsc("/sessions/")+n.IdRegExp+n.EndStringRegExp)).respond(function(e,t,r,n){return console.log("MockedUserSessionsResource whenDELETE",r,n),[200,{},{}]})},n}])}(),function(e){"use strict";var t=angular.module("pipFakeDataModel.Users",[]);t.service("pipFakeDataModelUsers",["pipBasicGeneratorServices","pipDataGeneratorUserParty",function(t,r){function n(e){var t,n,o=e>0?e:10;for(l=[],n=0;n<o;n++)t=r.getOneUser(),l.push(t);return l}function o(){return l}function a(e){l=e}function c(t){var r=e.find(l,t)||[];return r[0]||null}function i(){return o()}function s(t){var r=e.find(l,t)||[];return r}function u(e){var t;return t=r.getOneUser(e),l.push(t),t}function p(e,t){var r,n=o(),a=null;for(r=0;r<n.length;r++)if(n[r].id==e){a=n[r];break}return angular.isObject(a)?(angular.extend(a,t),a):{}}function d(e){var t,r=o(),n=!1;for(t=0;t<r.length;t++)if(r[t].id==e){n=!0,r.splice(t,1);break}return n}var l=[];return{dataGenerate:n,getData:o,setData:a,findOne:c,findAll:i,findMany:s,addOne:u,updateOne:p,deleteOne:d}}])}(window._),function(e,t){"use strict";var r=angular.module("pipDataGenerator.UserParty",[]);r.service("pipDataGeneratorUserParty",["pipBasicGeneratorServices",function(r){function n(n){var o=new Date(t.timestamp()),a={address:t.ip(),client:r.getOne(["chrome","mozilla","explorer"]),platform:r.getOne(["windows 8","windows 7","linux"]),last_req:o.toJSON(),opened:o.toJSON(),id:r.getObjectId()};return n&&(a=e.assign(a,n)),a}function o(o){var c=t.timestamp(),i=t.timestamp(),s={pwd_last_fail:null,pwd_fail_count:0,name:r.getName(),email:t.email(),language:r.getOne(["en","ru","fr"]),paid:t.bool({likelihood:30}),admin:!1,party_access:a(),sessions:n(),signin:c>i?new Date(c).toJSON():new Date(i).toJSON(),signup:c>i?new Date(i).toJSON():new Date(c).toJSON(),active:!0,lock:!1,email_ver:!1,id:r.getObjectId(),last_session_id:r.getObjectId()};return o&&(s=e.assign(s,o)),s}function a(n,o){var a,c,i,s=[],u=n||Math.floor(10*Math.random());for(a=0;a<u;a++)i=t.bool({likelihood:30}),c={share_level:0,type:"partner",party_name:t.first()+" "+t.name(),party_id:r.getObjectId(),contributor:i,manager:!!i&&t.bool({likelihood:30}),id:r.getObjectId()},o&&(c=e.assign(c,o)),s.push(c);return s}function c(n){var o=t.timestamp(),a=t.timestamp(),c={name:t.first()+" "+t.name(),email:t.email(),type:"person",gender:t.gender().toLowerCase(),loc_name:t.address(),loc_pos:{type:"Point",coordinates:[t.floating({min:-120,max:120}),t.floating({min:-120,max:120})]},join:"approve",updated:o>a?new Date(o).toJSON():new Date(a).toJSON(),created:o>a?new Date(a).toJSON():new Date(o).toJSON(),id:r.getObjectId()};return n&&(c=e.assign(c,n)),c}function i(n,o){if(!n||!n.id||!n.name)return null;var a=t.bool({likelihood:30}),c={party_id:n.id,party_type:n.type,party_name:n.name,to_party_id:r.getObjectId(),to_party_name:t.first()+" "+t.name(),to_party_type:"person",type:"partner",share_level:t.integer({min:0,max:4}),accept:"joined",group_ids:[],contributor:a,manager:!!a&&t.bool({likelihood:30}),snoozed:!1,created:new Date(t.timestamp()).toJSON(),id:r.getObjectId()};return o&&(c=e.assign(c,o)),c}return{getOneUser:o,getParty:c,getConnection:i,getPartyAccess:a}}])}(window._,window.chance);